projects:
  ubuntu-aarch64:
    active: true
    project_subdir: rootfs/ubuntu/aarch64
    sources:
      - type: download
        url: ${UBUNTU.ROOTFS.SOURCE.ARM64}
        subdir: download
    patches:
      - type: unpack
        file: download/${UBUNTU.ROOTFS.NAME.ARM64}.tar.gz
        subdir: rootfs
    builders:
      - type: rootfs.ubuntu
        subdir: rootfs
        user: *UBUNTU_USER_ALIAS
        packages: *PACKAGES_ALIAS
        image:
          file: rootfs.img
          fs: ext4
          size: 4096 MB
          content:
            - action: extract
              from: rootfs/ubuntu/aarch64/download/${UBUNTU.ROOTFS.NAME.ARM64}.tar.gz
              to: "."
            - action: copy
              from: linux/kernel/out/deploy/lib/.
              to: lib

  ubuntu-x86-64:
    active: true
    project_subdir: rootfs/ubuntu/x86-64
    sources:
      - type: download
        url: ${UBUNTU.ROOTFS.SOURCE.X86_64}
        subdir: download
    patches:
      - type: unpack
        file: download/${UBUNTU.ROOTFS.NAME.X86_64}.tar.gz
        subdir: rootfs
    builders:
      - type: rootfs.ubuntu
        subdir: rootfs
        user: *UBUNTU_USER_ALIAS
        packages: *PACKAGES_ALIAS
        image:
          file: rootfs.img
          fs: ext4
          size: 4096 MB
          content:
            - action: extract
              from: rootfs/ubuntu/aarch64/download/${UBUNTU.ROOTFS.NAME.X86_64}.tar.gz
              to: "."
            - action: copy
              from: linux/kernel/out/deploy/lib/.
              to: lib
